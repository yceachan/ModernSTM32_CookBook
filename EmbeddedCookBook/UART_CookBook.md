从内核与外设的角度理解UART

UART：通用非同步并行转串行收发器

core $-并行数据->$ uart外设IC$-串行波特率传输->$外部引脚

通用性：对UART_IC，收发器可有：TTL直接同步，RS232/485信号，红外信号(IrDA)，蓝牙(HIC)

非同步性：使用约定波特率进行数据交换，表现形式为：IC对RX/TX上的信号采样。

并行：以并行的data_bus宽度与core交数据

串行：在波特率下 bit by bit 地将数据映射到 RX/TX引脚上。



# 通讯层

IDLE(空闲帧) : RX/TX在空闲帧保持逻辑1，IDLE状态寄存器置位

TX端，在起始位，TX由空闲置位状态 到 被下拉一个bauds周期。随后在byte帧开始周期性地同步TX电平，然后是可存在的1buads的奇偶校验位，在停止位，保持设定时长的置位状态。（1停止位）

RX端：IC以设置采样频率（8/16倍过采样）采样RX引脚电平，裁决此bit的逻辑，分辨出strat/stop信号和数据。最后解析出此byte数据，并行同步给core。

除频误差：波特率由晶振整除得到，存在整除漂移现象，不同晶振源的两个UART通讯，设置波特率与实际波特率不一定一致。（而stm32具有小数波特率发生器） 这会造成RX端采样与TX端发送的一点点偏移，也就需要RX端的过采样和决议。

时钟漂移/抖动误差：两个UART的晶振的起震相位有漂移（APB_CLOCK），导致到RX端的START位时机有漂移-->RX的计算时机必须延迟到下一个边沿上。（UASRT捏）

# CMISMS驱动层

